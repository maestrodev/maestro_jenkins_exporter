#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.dirname(__FILE__) + '/../lib') unless $LOAD_PATH.include?(File.dirname(__FILE__) + '/../lib')

# Detect running Warbler JAR, and if so unset GEM_PATH
if ENV['GEM_HOME'] =~ /^file:.*\.jar!/
  ENV.delete 'GEM_PATH'
end

require 'maestro_jenkins_exporter'
require 'yaml'


options = YAML.load(File.open("footman.yml"))

# TODO: summarise options if being verbose
# TODO: command line options to override options: dry-run, verbose, build

MaestroJenkinsExporter::Exporter.new(options).export
